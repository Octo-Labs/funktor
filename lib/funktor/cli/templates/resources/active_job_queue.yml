Resources:
  ActiveJobQueue:
    Type: AWS::SQS::Queue
    Properties:
      QueueName: ${self:custom.activeJobQueueName}
      VisibilityTimeout: 300
      RedrivePolicy:
        deadLetterTargetArn:
          "Fn::GetAtt": [ ActiveJobDeadLetterQueue, Arn ]
        maxReceiveCount: 5
  ActiveJobDeadLetterQueue:
    Type: AWS::SQS::Queue
    Properties:
      QueueName: ${self:custom.deadJobQueueName}

Outputs:
  ActiveJobQueueUrl:
    Value:
      Ref: ActiveJobQueue
  ActiveJobDeadLetterQueueUrl:
    Value:
      Ref: ActiveJobDeadLetterQueue
