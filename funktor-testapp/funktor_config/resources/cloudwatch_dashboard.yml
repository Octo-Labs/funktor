Resources:
  FunktorDashboard:
    Type: AWS::CloudWatch::Dashboard
    Properties:
      DashboardName: ${self:custom.funktor.DashboardName}
      DashboardBody: >
        {
            "widgets": [

                

                { 
                    "height": 3,
                    "width": 24,
                    "y": 0,
                    "x": 0,
                    "type": "text",
                    "properties": {
                        "markdown": "\n# Funktor Auto-generated Dashbaord\n\n This dashboard is auto-generated by Funktor and will be updated as Funktor progresses. If you want to customize this dashboard you should use 'Actions => Save dashbaord as' in the toolbar above to create a new dashboard of your own.\n\n The upper section shows you high level queue and worker stats, the lower sections show more details about all the AWS resources at play."
                    }
                },
                

                { 
                    "height": 1,
                    "width": 24,
                    "y": 3,
                    "x": 0,
                    "type": "text",
                    "properties": {
                        "markdown": "\n# Primary Workers Overview \n"
                    }
                },
                


                  { 
                      "height": 7,
                      "width": 4,
                      "y": 4,
                      "x": 0,
                      "type": "metric",
                      "properties": {
                          "metrics": [
                            [ "${self:custom.funktor.DashboardNamespace}", "processed", "WorkerClassName", "HelloWorker", { "color": "#2ca02c" } ],
                            [ "${self:custom.funktor.DashboardNamespace}", "Duration", "WorkerClassName", "HelloWorker", { "label": "p90", "color": "#ff7f0e", "stat": "p90" } ],
                            [ "${self:custom.funktor.DashboardNamespace}", "Duration", "WorkerClassName", "HelloWorker", { "label": "p50", "color": "#1f77b4", "stat": "p50" } ]
                          ],
                          "view": "singleValue",
                          "region": "us-east-1",
                          "stat": "Sum",
                          "period": 60,
                          "sparkline": true,
                          "title": "HelloWorker"
                      }
                  },
                  { 
                      "height": 3,
                      "width": 4,
                      "y": 11,
                      "x": 0,
                      "type": "metric",
                      "properties": {
                          "metrics": [
                            [ "${self:custom.funktor.DashboardNamespace}", "failed", "WorkerClassName", "HelloWorker", { "color": "#d62728" } ]
                          ],
                          "view": "singleValue",
                          "region": "us-east-1",
                          "stat": "Sum",
                          "period": 60,
                          "sparkline": true,
                          "title": "HelloWorker"
                      }
                  },

                  { 
                      "height": 7,
                      "width": 4,
                      "y": 4,
                      "x": 4,
                      "type": "metric",
                      "properties": {
                          "metrics": [
                            [ "${self:custom.funktor.DashboardNamespace}", "processed", "WorkerClassName", "AuditWorker", { "color": "#2ca02c" } ],
                            [ "${self:custom.funktor.DashboardNamespace}", "Duration", "WorkerClassName", "AuditWorker", { "label": "p90", "color": "#ff7f0e", "stat": "p90" } ],
                            [ "${self:custom.funktor.DashboardNamespace}", "Duration", "WorkerClassName", "AuditWorker", { "label": "p50", "color": "#1f77b4", "stat": "p50" } ]
                          ],
                          "view": "singleValue",
                          "region": "us-east-1",
                          "stat": "Sum",
                          "period": 60,
                          "sparkline": true,
                          "title": "AuditWorker"
                      }
                  },
                  { 
                      "height": 3,
                      "width": 4,
                      "y": 11,
                      "x": 4,
                      "type": "metric",
                      "properties": {
                          "metrics": [
                            [ "${self:custom.funktor.DashboardNamespace}", "failed", "WorkerClassName", "AuditWorker", { "color": "#d62728" } ]
                          ],
                          "view": "singleValue",
                          "region": "us-east-1",
                          "stat": "Sum",
                          "period": 60,
                          "sparkline": true,
                          "title": "AuditWorker"
                      }
                  },

                  { 
                      "height": 7,
                      "width": 4,
                      "y": 4,
                      "x": 8,
                      "type": "metric",
                      "properties": {
                          "metrics": [
                            [ "${self:custom.funktor.DashboardNamespace}", "processed", "WorkerClassName", "GreetingsWorker", { "color": "#2ca02c" } ],
                            [ "${self:custom.funktor.DashboardNamespace}", "Duration", "WorkerClassName", "GreetingsWorker", { "label": "p90", "color": "#ff7f0e", "stat": "p90" } ],
                            [ "${self:custom.funktor.DashboardNamespace}", "Duration", "WorkerClassName", "GreetingsWorker", { "label": "p50", "color": "#1f77b4", "stat": "p50" } ]
                          ],
                          "view": "singleValue",
                          "region": "us-east-1",
                          "stat": "Sum",
                          "period": 60,
                          "sparkline": true,
                          "title": "GreetingsWorker"
                      }
                  },
                  { 
                      "height": 3,
                      "width": 4,
                      "y": 11,
                      "x": 8,
                      "type": "metric",
                      "properties": {
                          "metrics": [
                            [ "${self:custom.funktor.DashboardNamespace}", "failed", "WorkerClassName", "GreetingsWorker", { "color": "#d62728" } ]
                          ],
                          "view": "singleValue",
                          "region": "us-east-1",
                          "stat": "Sum",
                          "period": 60,
                          "sparkline": true,
                          "title": "GreetingsWorker"
                      }
                  },

                  { 
                      "height": 7,
                      "width": 4,
                      "y": 4,
                      "x": 12,
                      "type": "metric",
                      "properties": {
                          "metrics": [
                            [ "${self:custom.funktor.DashboardNamespace}", "processed", "WorkerClassName", "SingleThreadAuditWorker", { "color": "#2ca02c" } ],
                            [ "${self:custom.funktor.DashboardNamespace}", "Duration", "WorkerClassName", "SingleThreadAuditWorker", { "label": "p90", "color": "#ff7f0e", "stat": "p90" } ],
                            [ "${self:custom.funktor.DashboardNamespace}", "Duration", "WorkerClassName", "SingleThreadAuditWorker", { "label": "p50", "color": "#1f77b4", "stat": "p50" } ]
                          ],
                          "view": "singleValue",
                          "region": "us-east-1",
                          "stat": "Sum",
                          "period": 60,
                          "sparkline": true,
                          "title": "SingleThreadAuditWorker"
                      }
                  },
                  { 
                      "height": 3,
                      "width": 4,
                      "y": 11,
                      "x": 12,
                      "type": "metric",
                      "properties": {
                          "metrics": [
                            [ "${self:custom.funktor.DashboardNamespace}", "failed", "WorkerClassName", "SingleThreadAuditWorker", { "color": "#d62728" } ]
                          ],
                          "view": "singleValue",
                          "region": "us-east-1",
                          "stat": "Sum",
                          "period": 60,
                          "sparkline": true,
                          "title": "SingleThreadAuditWorker"
                      }
                  },
                


                { 
                    "height": 1,
                    "width": 24,
                    "y": 14,
                    "x": 0,
                    "type": "text",
                    "properties": {
                        "markdown": "\n# HelloWorker\n"
                    }
                },
                

                { 
                    "height": 3,
                    "width": 3,
                    "y": 15,
                    "x": 0,
                    "type": "metric",
                    "properties": {
                        "metrics": [
                            [ "${self:custom.funktor.DashboardNamespace}", "processed", "WorkerClassName", "HelloWorker" ]
                        ],
                        "view": "singleValue",
                        "region": "us-east-1",
                        "stat": "Sum",
                        "period": 60,
                        "sparkline": true,
                        "title": "HelloWorker Processed/Min"
                    }
                },
                { 
                    "height": 3,
                    "width": 3,
                    "y": 15,
                    "x": 3,
                    "type": "metric",
                    "properties": {
                        "metrics": [
                            [ "${self:custom.funktor.DashboardNamespace}", "failed", "WorkerClassName", "HelloWorker", { "color": "#d62728" } ]
                        ],
                        "view": "singleValue",
                        "region": "us-east-1",
                        "stat": "Sum",
                        "period": 60,
                        "sparkline": true,
                        "title": "HelloWorker Failed/Min"
                    }
                },
                { 
                    "height": 3,
                    "width": 3,
                    "y": 15,
                    "x": 6,
                    "type": "metric",
                    "properties": {
                        "metrics": [
                            [ "${self:custom.funktor.DashboardNamespace}", "Duration", "WorkerClassName", "HelloWorker", { "label": "p20", "color": "#1f77b4" } ]
                        ],
                        "view": "singleValue",
                        "region": "us-east-1",
                        "stat": "p20",
                        "period": 60,
                        "sparkline": true,
                        "title": "HelloWorker p20"
                    }
                },
               { 
                    "height": 3,
                    "width": 3,
                    "y": 15,
                    "x": 9,
                    "type": "metric",
                    "properties": {
                        "metrics": [
                            [ "${self:custom.funktor.DashboardNamespace}", "Duration", "WorkerClassName", "HelloWorker", { "label": "p50", "color": "#ff7f0e" } ]
                        ],
                        "view": "singleValue",
                        "region": "us-east-1",
                        "stat": "p50",
                        "period": 60,
                        "sparkline": true,
                        "title": "HelloWorker p50"
                    }
                },
               { 
                    "height": 3,
                    "width": 3,
                    "y": 15,
                    "x": 12,
                    "type": "metric",
                    "properties": {
                        "metrics": [
                            [ "${self:custom.funktor.DashboardNamespace}", "Duration", "WorkerClassName", "HelloWorker", { "label": "p80", "color": "#2ca02c" } ]
                        ],
                        "view": "singleValue",
                        "region": "us-east-1",
                        "stat": "p80",
                        "period": 60,
                        "sparkline": true,
                        "title": "HelloWorker p80"
                    }
                },
               { 
                    "height": 3,
                    "width": 3,
                    "y": 15,
                    "x": 15,
                    "type": "metric",
                    "properties": {
                        "metrics": [
                            [ "${self:custom.funktor.DashboardNamespace}", "Duration", "WorkerClassName", "HelloWorker", { "label": "p90", "color": "#d62728" } ]
                        ],
                        "view": "singleValue",
                        "region": "us-east-1",
                        "stat": "p90",
                        "period": 60,
                        "sparkline": true,
                        "title": "HelloWorker p90"
                    }
                },
                { 
                    "height": 3,
                    "width": 3,
                    "y": 15,
                    "x": 18,
                    "type": "metric",
                    "properties": {
                        "metrics": [
                            [ "${self:custom.funktor.DashboardNamespace}", "Duration", "WorkerClassName", "HelloWorker", { "label": "Min" } ]
                        ],
                        "view": "singleValue",
                        "region": "us-east-1",
                        "stat": "Minimum",
                        "period": 60,
                        "sparkline": true,
                        "title": "HelloWorker Min"
                    }
                },
                { 
                    "height": 3,
                    "width": 3,
                    "y": 15,
                    "x": 21,
                    "type": "metric",
                    "properties": {
                        "metrics": [
                            [ "${self:custom.funktor.DashboardNamespace}", "Duration", "WorkerClassName", "HelloWorker", { "label": "Max", "color": "#d62728" } ]
                        ],
                        "view": "singleValue",
                        "region": "us-east-1",
                        "stat": "Maximum",
                        "period": 60,
                        "sparkline": true,
                        "title": "HelloWorker Max"
                    }
                },
                




                { 
                    "height": 3,
                    "width": 3,
                    "y": 18,
                    "x": 0,
                    "type": "metric",
                    "properties": {
                        "metrics": [
                          [ "${self:custom.funktor.DashboardNamespace}", "processed", "WorkerClassName", "HelloWorker" ]
                        ],
                        "view": "timeSeries",
                        "stacked": false,
                        "region": "us-east-1",
                        "title": "HelloWorker Processed Jobs",
                        "period": 60,
                        "stat": "Sum",
                        "legend": {
                          "position": "hidden"
                        }
                  }
                },
                { 
                    "height": 3,
                    "width": 3,
                    "y": 18,
                    "x": 3,
                    "type": "metric",
                    "properties": {
                        "metrics": [
                          [ "${self:custom.funktor.DashboardNamespace}", "failed", "WorkerClassName", "HelloWorker", { "color": "#d62728" }]
                        ],
                        "view": "timeSeries",
                        "stacked": false,
                        "region": "us-east-1",
                        "title": "HelloWorker Failed Jobs",
                        "period": 60,
                        "stat": "Sum",
                        "legend": {
                          "position": "hidden"
                        }
                  }
                },
                { 
                    "height": 3,
                    "width": 12,
                    "y": 18,
                    "x": 6,
                    "type": "metric",
                    "properties": {
                        "metrics": [
                          [ "${self:custom.funktor.DashboardNamespace}", "Duration", "WorkerClassName", "HelloWorker", { "stat": "p90", "color": "#d62728" } ],
                          [ "...", { "stat": "p80", "color": "#2ca02c" } ],
                          [ "...", { "stat": "p50", "color": "#ff7f0e" } ],
                          [ "...", { "color": "#1f77b4" } ]
                        ],
                        "view": "timeSeries",
                        "stacked": false,
                        "region": "us-east-1",
                        "stat": "p20",
                        "period": 60,
                        "title": "HelloWorker Duration Percentiles",
                        "legend": {
                          "position": "right"
                        }
                    }
                },
                { 
                    "height": 3,
                    "width": 3,
                    "y": 18,
                    "x": 18,
                    "type": "metric",
                    "properties": {
                        "metrics": [
                            [ "${self:custom.funktor.DashboardNamespace}", "Duration", "WorkerClassName", "HelloWorker" ]
                        ],
                        "view": "timeSeries",
                        "stacked": false,
                        "region": "us-east-1",
                        "stat": "Minimum",
                        "period": 60,
                        "title": "HelloWorker Min",
                        "legend": {
                          "position": "hidden"
                        }
                    }
                },
                { 
                    "height": 3,
                    "width": 3,
                    "y": 18,
                    "x": 21,
                    "type": "metric",
                    "properties": {
                        "metrics": [
                            [ "${self:custom.funktor.DashboardNamespace}", "Duration", "WorkerClassName", "HelloWorker", { "color": "#d62728" } ]
                        ],
                        "view": "timeSeries",
                        "stacked": false,
                        "region": "us-east-1",
                        "stat": "Maximum",
                        "period": 60,
                        "title": "HelloWorker Max",
                        "legend": {
                          "position": "hidden"
                        }
                    }
                },
                
                { 
                    "height": 1,
                    "width": 24,
                    "y": 24,
                    "x": 0,
                    "type": "text",
                    "properties": {
                        "markdown": "\n# AuditWorker\n"
                    }
                },
                

                { 
                    "height": 3,
                    "width": 3,
                    "y": 25,
                    "x": 0,
                    "type": "metric",
                    "properties": {
                        "metrics": [
                            [ "${self:custom.funktor.DashboardNamespace}", "processed", "WorkerClassName", "AuditWorker" ]
                        ],
                        "view": "singleValue",
                        "region": "us-east-1",
                        "stat": "Sum",
                        "period": 60,
                        "sparkline": true,
                        "title": "AuditWorker Processed/Min"
                    }
                },
                { 
                    "height": 3,
                    "width": 3,
                    "y": 25,
                    "x": 3,
                    "type": "metric",
                    "properties": {
                        "metrics": [
                            [ "${self:custom.funktor.DashboardNamespace}", "failed", "WorkerClassName", "AuditWorker", { "color": "#d62728" } ]
                        ],
                        "view": "singleValue",
                        "region": "us-east-1",
                        "stat": "Sum",
                        "period": 60,
                        "sparkline": true,
                        "title": "AuditWorker Failed/Min"
                    }
                },
                { 
                    "height": 3,
                    "width": 3,
                    "y": 25,
                    "x": 6,
                    "type": "metric",
                    "properties": {
                        "metrics": [
                            [ "${self:custom.funktor.DashboardNamespace}", "Duration", "WorkerClassName", "AuditWorker", { "label": "p20", "color": "#1f77b4" } ]
                        ],
                        "view": "singleValue",
                        "region": "us-east-1",
                        "stat": "p20",
                        "period": 60,
                        "sparkline": true,
                        "title": "AuditWorker p20"
                    }
                },
               { 
                    "height": 3,
                    "width": 3,
                    "y": 25,
                    "x": 9,
                    "type": "metric",
                    "properties": {
                        "metrics": [
                            [ "${self:custom.funktor.DashboardNamespace}", "Duration", "WorkerClassName", "AuditWorker", { "label": "p50", "color": "#ff7f0e" } ]
                        ],
                        "view": "singleValue",
                        "region": "us-east-1",
                        "stat": "p50",
                        "period": 60,
                        "sparkline": true,
                        "title": "AuditWorker p50"
                    }
                },
               { 
                    "height": 3,
                    "width": 3,
                    "y": 25,
                    "x": 12,
                    "type": "metric",
                    "properties": {
                        "metrics": [
                            [ "${self:custom.funktor.DashboardNamespace}", "Duration", "WorkerClassName", "AuditWorker", { "label": "p80", "color": "#2ca02c" } ]
                        ],
                        "view": "singleValue",
                        "region": "us-east-1",
                        "stat": "p80",
                        "period": 60,
                        "sparkline": true,
                        "title": "AuditWorker p80"
                    }
                },
               { 
                    "height": 3,
                    "width": 3,
                    "y": 25,
                    "x": 15,
                    "type": "metric",
                    "properties": {
                        "metrics": [
                            [ "${self:custom.funktor.DashboardNamespace}", "Duration", "WorkerClassName", "AuditWorker", { "label": "p90", "color": "#d62728" } ]
                        ],
                        "view": "singleValue",
                        "region": "us-east-1",
                        "stat": "p90",
                        "period": 60,
                        "sparkline": true,
                        "title": "AuditWorker p90"
                    }
                },
                { 
                    "height": 3,
                    "width": 3,
                    "y": 25,
                    "x": 18,
                    "type": "metric",
                    "properties": {
                        "metrics": [
                            [ "${self:custom.funktor.DashboardNamespace}", "Duration", "WorkerClassName", "AuditWorker", { "label": "Min" } ]
                        ],
                        "view": "singleValue",
                        "region": "us-east-1",
                        "stat": "Minimum",
                        "period": 60,
                        "sparkline": true,
                        "title": "AuditWorker Min"
                    }
                },
                { 
                    "height": 3,
                    "width": 3,
                    "y": 25,
                    "x": 21,
                    "type": "metric",
                    "properties": {
                        "metrics": [
                            [ "${self:custom.funktor.DashboardNamespace}", "Duration", "WorkerClassName", "AuditWorker", { "label": "Max", "color": "#d62728" } ]
                        ],
                        "view": "singleValue",
                        "region": "us-east-1",
                        "stat": "Maximum",
                        "period": 60,
                        "sparkline": true,
                        "title": "AuditWorker Max"
                    }
                },
                




                { 
                    "height": 3,
                    "width": 3,
                    "y": 28,
                    "x": 0,
                    "type": "metric",
                    "properties": {
                        "metrics": [
                          [ "${self:custom.funktor.DashboardNamespace}", "processed", "WorkerClassName", "AuditWorker" ]
                        ],
                        "view": "timeSeries",
                        "stacked": false,
                        "region": "us-east-1",
                        "title": "AuditWorker Processed Jobs",
                        "period": 60,
                        "stat": "Sum",
                        "legend": {
                          "position": "hidden"
                        }
                  }
                },
                { 
                    "height": 3,
                    "width": 3,
                    "y": 28,
                    "x": 3,
                    "type": "metric",
                    "properties": {
                        "metrics": [
                          [ "${self:custom.funktor.DashboardNamespace}", "failed", "WorkerClassName", "AuditWorker", { "color": "#d62728" }]
                        ],
                        "view": "timeSeries",
                        "stacked": false,
                        "region": "us-east-1",
                        "title": "AuditWorker Failed Jobs",
                        "period": 60,
                        "stat": "Sum",
                        "legend": {
                          "position": "hidden"
                        }
                  }
                },
                { 
                    "height": 3,
                    "width": 12,
                    "y": 28,
                    "x": 6,
                    "type": "metric",
                    "properties": {
                        "metrics": [
                          [ "${self:custom.funktor.DashboardNamespace}", "Duration", "WorkerClassName", "AuditWorker", { "stat": "p90", "color": "#d62728" } ],
                          [ "...", { "stat": "p80", "color": "#2ca02c" } ],
                          [ "...", { "stat": "p50", "color": "#ff7f0e" } ],
                          [ "...", { "color": "#1f77b4" } ]
                        ],
                        "view": "timeSeries",
                        "stacked": false,
                        "region": "us-east-1",
                        "stat": "p20",
                        "period": 60,
                        "title": "AuditWorker Duration Percentiles",
                        "legend": {
                          "position": "right"
                        }
                    }
                },
                { 
                    "height": 3,
                    "width": 3,
                    "y": 28,
                    "x": 18,
                    "type": "metric",
                    "properties": {
                        "metrics": [
                            [ "${self:custom.funktor.DashboardNamespace}", "Duration", "WorkerClassName", "AuditWorker" ]
                        ],
                        "view": "timeSeries",
                        "stacked": false,
                        "region": "us-east-1",
                        "stat": "Minimum",
                        "period": 60,
                        "title": "AuditWorker Min",
                        "legend": {
                          "position": "hidden"
                        }
                    }
                },
                { 
                    "height": 3,
                    "width": 3,
                    "y": 28,
                    "x": 21,
                    "type": "metric",
                    "properties": {
                        "metrics": [
                            [ "${self:custom.funktor.DashboardNamespace}", "Duration", "WorkerClassName", "AuditWorker", { "color": "#d62728" } ]
                        ],
                        "view": "timeSeries",
                        "stacked": false,
                        "region": "us-east-1",
                        "stat": "Maximum",
                        "period": 60,
                        "title": "AuditWorker Max",
                        "legend": {
                          "position": "hidden"
                        }
                    }
                },
                
                { 
                    "height": 1,
                    "width": 24,
                    "y": 34,
                    "x": 0,
                    "type": "text",
                    "properties": {
                        "markdown": "\n# GreetingsWorker\n"
                    }
                },
                

                { 
                    "height": 3,
                    "width": 3,
                    "y": 35,
                    "x": 0,
                    "type": "metric",
                    "properties": {
                        "metrics": [
                            [ "${self:custom.funktor.DashboardNamespace}", "processed", "WorkerClassName", "GreetingsWorker" ]
                        ],
                        "view": "singleValue",
                        "region": "us-east-1",
                        "stat": "Sum",
                        "period": 60,
                        "sparkline": true,
                        "title": "GreetingsWorker Processed/Min"
                    }
                },
                { 
                    "height": 3,
                    "width": 3,
                    "y": 35,
                    "x": 3,
                    "type": "metric",
                    "properties": {
                        "metrics": [
                            [ "${self:custom.funktor.DashboardNamespace}", "failed", "WorkerClassName", "GreetingsWorker", { "color": "#d62728" } ]
                        ],
                        "view": "singleValue",
                        "region": "us-east-1",
                        "stat": "Sum",
                        "period": 60,
                        "sparkline": true,
                        "title": "GreetingsWorker Failed/Min"
                    }
                },
                { 
                    "height": 3,
                    "width": 3,
                    "y": 35,
                    "x": 6,
                    "type": "metric",
                    "properties": {
                        "metrics": [
                            [ "${self:custom.funktor.DashboardNamespace}", "Duration", "WorkerClassName", "GreetingsWorker", { "label": "p20", "color": "#1f77b4" } ]
                        ],
                        "view": "singleValue",
                        "region": "us-east-1",
                        "stat": "p20",
                        "period": 60,
                        "sparkline": true,
                        "title": "GreetingsWorker p20"
                    }
                },
               { 
                    "height": 3,
                    "width": 3,
                    "y": 35,
                    "x": 9,
                    "type": "metric",
                    "properties": {
                        "metrics": [
                            [ "${self:custom.funktor.DashboardNamespace}", "Duration", "WorkerClassName", "GreetingsWorker", { "label": "p50", "color": "#ff7f0e" } ]
                        ],
                        "view": "singleValue",
                        "region": "us-east-1",
                        "stat": "p50",
                        "period": 60,
                        "sparkline": true,
                        "title": "GreetingsWorker p50"
                    }
                },
               { 
                    "height": 3,
                    "width": 3,
                    "y": 35,
                    "x": 12,
                    "type": "metric",
                    "properties": {
                        "metrics": [
                            [ "${self:custom.funktor.DashboardNamespace}", "Duration", "WorkerClassName", "GreetingsWorker", { "label": "p80", "color": "#2ca02c" } ]
                        ],
                        "view": "singleValue",
                        "region": "us-east-1",
                        "stat": "p80",
                        "period": 60,
                        "sparkline": true,
                        "title": "GreetingsWorker p80"
                    }
                },
               { 
                    "height": 3,
                    "width": 3,
                    "y": 35,
                    "x": 15,
                    "type": "metric",
                    "properties": {
                        "metrics": [
                            [ "${self:custom.funktor.DashboardNamespace}", "Duration", "WorkerClassName", "GreetingsWorker", { "label": "p90", "color": "#d62728" } ]
                        ],
                        "view": "singleValue",
                        "region": "us-east-1",
                        "stat": "p90",
                        "period": 60,
                        "sparkline": true,
                        "title": "GreetingsWorker p90"
                    }
                },
                { 
                    "height": 3,
                    "width": 3,
                    "y": 35,
                    "x": 18,
                    "type": "metric",
                    "properties": {
                        "metrics": [
                            [ "${self:custom.funktor.DashboardNamespace}", "Duration", "WorkerClassName", "GreetingsWorker", { "label": "Min" } ]
                        ],
                        "view": "singleValue",
                        "region": "us-east-1",
                        "stat": "Minimum",
                        "period": 60,
                        "sparkline": true,
                        "title": "GreetingsWorker Min"
                    }
                },
                { 
                    "height": 3,
                    "width": 3,
                    "y": 35,
                    "x": 21,
                    "type": "metric",
                    "properties": {
                        "metrics": [
                            [ "${self:custom.funktor.DashboardNamespace}", "Duration", "WorkerClassName", "GreetingsWorker", { "label": "Max", "color": "#d62728" } ]
                        ],
                        "view": "singleValue",
                        "region": "us-east-1",
                        "stat": "Maximum",
                        "period": 60,
                        "sparkline": true,
                        "title": "GreetingsWorker Max"
                    }
                },
                




                { 
                    "height": 3,
                    "width": 3,
                    "y": 38,
                    "x": 0,
                    "type": "metric",
                    "properties": {
                        "metrics": [
                          [ "${self:custom.funktor.DashboardNamespace}", "processed", "WorkerClassName", "GreetingsWorker" ]
                        ],
                        "view": "timeSeries",
                        "stacked": false,
                        "region": "us-east-1",
                        "title": "GreetingsWorker Processed Jobs",
                        "period": 60,
                        "stat": "Sum",
                        "legend": {
                          "position": "hidden"
                        }
                  }
                },
                { 
                    "height": 3,
                    "width": 3,
                    "y": 38,
                    "x": 3,
                    "type": "metric",
                    "properties": {
                        "metrics": [
                          [ "${self:custom.funktor.DashboardNamespace}", "failed", "WorkerClassName", "GreetingsWorker", { "color": "#d62728" }]
                        ],
                        "view": "timeSeries",
                        "stacked": false,
                        "region": "us-east-1",
                        "title": "GreetingsWorker Failed Jobs",
                        "period": 60,
                        "stat": "Sum",
                        "legend": {
                          "position": "hidden"
                        }
                  }
                },
                { 
                    "height": 3,
                    "width": 12,
                    "y": 38,
                    "x": 6,
                    "type": "metric",
                    "properties": {
                        "metrics": [
                          [ "${self:custom.funktor.DashboardNamespace}", "Duration", "WorkerClassName", "GreetingsWorker", { "stat": "p90", "color": "#d62728" } ],
                          [ "...", { "stat": "p80", "color": "#2ca02c" } ],
                          [ "...", { "stat": "p50", "color": "#ff7f0e" } ],
                          [ "...", { "color": "#1f77b4" } ]
                        ],
                        "view": "timeSeries",
                        "stacked": false,
                        "region": "us-east-1",
                        "stat": "p20",
                        "period": 60,
                        "title": "GreetingsWorker Duration Percentiles",
                        "legend": {
                          "position": "right"
                        }
                    }
                },
                { 
                    "height": 3,
                    "width": 3,
                    "y": 38,
                    "x": 18,
                    "type": "metric",
                    "properties": {
                        "metrics": [
                            [ "${self:custom.funktor.DashboardNamespace}", "Duration", "WorkerClassName", "GreetingsWorker" ]
                        ],
                        "view": "timeSeries",
                        "stacked": false,
                        "region": "us-east-1",
                        "stat": "Minimum",
                        "period": 60,
                        "title": "GreetingsWorker Min",
                        "legend": {
                          "position": "hidden"
                        }
                    }
                },
                { 
                    "height": 3,
                    "width": 3,
                    "y": 38,
                    "x": 21,
                    "type": "metric",
                    "properties": {
                        "metrics": [
                            [ "${self:custom.funktor.DashboardNamespace}", "Duration", "WorkerClassName", "GreetingsWorker", { "color": "#d62728" } ]
                        ],
                        "view": "timeSeries",
                        "stacked": false,
                        "region": "us-east-1",
                        "stat": "Maximum",
                        "period": 60,
                        "title": "GreetingsWorker Max",
                        "legend": {
                          "position": "hidden"
                        }
                    }
                },
                
                { 
                    "height": 1,
                    "width": 24,
                    "y": 44,
                    "x": 0,
                    "type": "text",
                    "properties": {
                        "markdown": "\n# SingleThreadAuditWorker\n"
                    }
                },
                

                { 
                    "height": 3,
                    "width": 3,
                    "y": 45,
                    "x": 0,
                    "type": "metric",
                    "properties": {
                        "metrics": [
                            [ "${self:custom.funktor.DashboardNamespace}", "processed", "WorkerClassName", "SingleThreadAuditWorker" ]
                        ],
                        "view": "singleValue",
                        "region": "us-east-1",
                        "stat": "Sum",
                        "period": 60,
                        "sparkline": true,
                        "title": "SingleThreadAuditWorker Processed/Min"
                    }
                },
                { 
                    "height": 3,
                    "width": 3,
                    "y": 45,
                    "x": 3,
                    "type": "metric",
                    "properties": {
                        "metrics": [
                            [ "${self:custom.funktor.DashboardNamespace}", "failed", "WorkerClassName", "SingleThreadAuditWorker", { "color": "#d62728" } ]
                        ],
                        "view": "singleValue",
                        "region": "us-east-1",
                        "stat": "Sum",
                        "period": 60,
                        "sparkline": true,
                        "title": "SingleThreadAuditWorker Failed/Min"
                    }
                },
                { 
                    "height": 3,
                    "width": 3,
                    "y": 45,
                    "x": 6,
                    "type": "metric",
                    "properties": {
                        "metrics": [
                            [ "${self:custom.funktor.DashboardNamespace}", "Duration", "WorkerClassName", "SingleThreadAuditWorker", { "label": "p20", "color": "#1f77b4" } ]
                        ],
                        "view": "singleValue",
                        "region": "us-east-1",
                        "stat": "p20",
                        "period": 60,
                        "sparkline": true,
                        "title": "SingleThreadAuditWorker p20"
                    }
                },
               { 
                    "height": 3,
                    "width": 3,
                    "y": 45,
                    "x": 9,
                    "type": "metric",
                    "properties": {
                        "metrics": [
                            [ "${self:custom.funktor.DashboardNamespace}", "Duration", "WorkerClassName", "SingleThreadAuditWorker", { "label": "p50", "color": "#ff7f0e" } ]
                        ],
                        "view": "singleValue",
                        "region": "us-east-1",
                        "stat": "p50",
                        "period": 60,
                        "sparkline": true,
                        "title": "SingleThreadAuditWorker p50"
                    }
                },
               { 
                    "height": 3,
                    "width": 3,
                    "y": 45,
                    "x": 12,
                    "type": "metric",
                    "properties": {
                        "metrics": [
                            [ "${self:custom.funktor.DashboardNamespace}", "Duration", "WorkerClassName", "SingleThreadAuditWorker", { "label": "p80", "color": "#2ca02c" } ]
                        ],
                        "view": "singleValue",
                        "region": "us-east-1",
                        "stat": "p80",
                        "period": 60,
                        "sparkline": true,
                        "title": "SingleThreadAuditWorker p80"
                    }
                },
               { 
                    "height": 3,
                    "width": 3,
                    "y": 45,
                    "x": 15,
                    "type": "metric",
                    "properties": {
                        "metrics": [
                            [ "${self:custom.funktor.DashboardNamespace}", "Duration", "WorkerClassName", "SingleThreadAuditWorker", { "label": "p90", "color": "#d62728" } ]
                        ],
                        "view": "singleValue",
                        "region": "us-east-1",
                        "stat": "p90",
                        "period": 60,
                        "sparkline": true,
                        "title": "SingleThreadAuditWorker p90"
                    }
                },
                { 
                    "height": 3,
                    "width": 3,
                    "y": 45,
                    "x": 18,
                    "type": "metric",
                    "properties": {
                        "metrics": [
                            [ "${self:custom.funktor.DashboardNamespace}", "Duration", "WorkerClassName", "SingleThreadAuditWorker", { "label": "Min" } ]
                        ],
                        "view": "singleValue",
                        "region": "us-east-1",
                        "stat": "Minimum",
                        "period": 60,
                        "sparkline": true,
                        "title": "SingleThreadAuditWorker Min"
                    }
                },
                { 
                    "height": 3,
                    "width": 3,
                    "y": 45,
                    "x": 21,
                    "type": "metric",
                    "properties": {
                        "metrics": [
                            [ "${self:custom.funktor.DashboardNamespace}", "Duration", "WorkerClassName", "SingleThreadAuditWorker", { "label": "Max", "color": "#d62728" } ]
                        ],
                        "view": "singleValue",
                        "region": "us-east-1",
                        "stat": "Maximum",
                        "period": 60,
                        "sparkline": true,
                        "title": "SingleThreadAuditWorker Max"
                    }
                },
                




                { 
                    "height": 3,
                    "width": 3,
                    "y": 48,
                    "x": 0,
                    "type": "metric",
                    "properties": {
                        "metrics": [
                          [ "${self:custom.funktor.DashboardNamespace}", "processed", "WorkerClassName", "SingleThreadAuditWorker" ]
                        ],
                        "view": "timeSeries",
                        "stacked": false,
                        "region": "us-east-1",
                        "title": "SingleThreadAuditWorker Processed Jobs",
                        "period": 60,
                        "stat": "Sum",
                        "legend": {
                          "position": "hidden"
                        }
                  }
                },
                { 
                    "height": 3,
                    "width": 3,
                    "y": 48,
                    "x": 3,
                    "type": "metric",
                    "properties": {
                        "metrics": [
                          [ "${self:custom.funktor.DashboardNamespace}", "failed", "WorkerClassName", "SingleThreadAuditWorker", { "color": "#d62728" }]
                        ],
                        "view": "timeSeries",
                        "stacked": false,
                        "region": "us-east-1",
                        "title": "SingleThreadAuditWorker Failed Jobs",
                        "period": 60,
                        "stat": "Sum",
                        "legend": {
                          "position": "hidden"
                        }
                  }
                },
                { 
                    "height": 3,
                    "width": 12,
                    "y": 48,
                    "x": 6,
                    "type": "metric",
                    "properties": {
                        "metrics": [
                          [ "${self:custom.funktor.DashboardNamespace}", "Duration", "WorkerClassName", "SingleThreadAuditWorker", { "stat": "p90", "color": "#d62728" } ],
                          [ "...", { "stat": "p80", "color": "#2ca02c" } ],
                          [ "...", { "stat": "p50", "color": "#ff7f0e" } ],
                          [ "...", { "color": "#1f77b4" } ]
                        ],
                        "view": "timeSeries",
                        "stacked": false,
                        "region": "us-east-1",
                        "stat": "p20",
                        "period": 60,
                        "title": "SingleThreadAuditWorker Duration Percentiles",
                        "legend": {
                          "position": "right"
                        }
                    }
                },
                { 
                    "height": 3,
                    "width": 3,
                    "y": 48,
                    "x": 18,
                    "type": "metric",
                    "properties": {
                        "metrics": [
                            [ "${self:custom.funktor.DashboardNamespace}", "Duration", "WorkerClassName", "SingleThreadAuditWorker" ]
                        ],
                        "view": "timeSeries",
                        "stacked": false,
                        "region": "us-east-1",
                        "stat": "Minimum",
                        "period": 60,
                        "title": "SingleThreadAuditWorker Min",
                        "legend": {
                          "position": "hidden"
                        }
                    }
                },
                { 
                    "height": 3,
                    "width": 3,
                    "y": 48,
                    "x": 21,
                    "type": "metric",
                    "properties": {
                        "metrics": [
                            [ "${self:custom.funktor.DashboardNamespace}", "Duration", "WorkerClassName", "SingleThreadAuditWorker", { "color": "#d62728" } ]
                        ],
                        "view": "timeSeries",
                        "stacked": false,
                        "region": "us-east-1",
                        "stat": "Maximum",
                        "period": 60,
                        "title": "SingleThreadAuditWorker Max",
                        "legend": {
                          "position": "hidden"
                        }
                    }
                },
                

                { 
                    "height": 3,
                    "width": 24,
                    "y": 54,
                    "x": 0,
                    "type": "text",
                    "properties": {
                        "markdown": "\n# Behind the scenes\n\n The stats below give some insight into the inner workings of the Funktor apparatus."
                    }
                },


                
                { 
                    "height": 3,
                    "width": 6,
                    "y": 60,
                    "x": 0,
                    "type": "text",
                    "properties": {
                        "markdown": "\n# Incoming Jobs\n"
                    }
                },
                { 
                    "height": 3,
                    "width": 3,
                    "y": 60,
                    "x": 6,
                    "type": "metric",
                    "properties": {
                        "metrics": [
                            [ "AWS/SQS", "NumberOfMessagesReceived", "QueueName", "${self:custom.funktor.IncomingJobQueueName}", { "label": "Messages Per Minute" } ]
                        ],
                        "view": "singleValue",
                        "region": "us-east-1",
                        "stat": "Sum",
                        "period": 60,
                        "sparkline": true,
                        "title": "Messages Per Minute"
                    }
                },
                { 
                    "height": 3,
                    "width": 15,
                    "y": 60,
                    "x": 9,
                    "type": "metric",
                    "properties": {
                        "metrics": [
                            [ "AWS/Lambda", "Duration", "FunctionName", "${self:custom.funktor.IncomingJobHandlerName}", "Resource", "${self:custom.funktor.IncomingJobHandlerName}", { "label": "p20" } ],
                            [ "...", { "label": "p50", "stat": "p50" } ],
                            [ "...", { "label": "p80", "stat": "p80" } ],
                            [ "...", { "label": "p90", "stat": "p90" } ]
                        ],
                        "view": "singleValue",
                        "region": "us-east-1",
                        "stat": "p20",
                        "period": 60,
                        "sparkline": true,
                        "title": "Handler Duration Percentiles"
                    }
                },


                
                { 
                    "height": 3,
                    "width": 9,
                    "y": 63,
                    "x": 0,
                    "type": "metric",
                    "properties": {
                        "metrics": [
                            [ "AWS/SQS", "NumberOfMessagesReceived", "QueueName", "${self:custom.funktor.IncomingJobQueueName}", { "label": "Received" } ],
                            [ ".", "NumberOfMessagesDeleted", ".", ".", { "label": "Handled" } ],
                            [ "AWS/Lambda", "Invocations", "FunctionName", "${self:custom.funktor.IncomingJobHandlerName}", "Resource", "${self:custom.funktor.IncomingJobHandlerName}", { "label": "Handler Invocations" } ],
                            [ "AWS/SQS", "ApproximateNumberOfMessagesVisible", "QueueName", "${self:custom.funktor.IncomingJobQueueName}", { "label": "Pending?" } ],
                            [ ".", "ApproximateNumberOfMessagesNotVisible", ".", ".", { "label": "Backlog?" } ],
                            [ ".", "NumberOfMessagesSent", ".", ".", { "label": "Sent" } ],
                            [ ".", "ApproximateNumberOfMessagesDelayed", ".", ".", { "label": "Delayed" } ]
                        ],
                        "view": "timeSeries",
                        "stacked": false,
                        "region": "us-east-1",
                        "title": "Incoming Job Queue (Async & scheduled jobs land here first)",
                        "period": 60,
                        "stat": "Sum",
                        "setPeriodToTimeRange": true,
                        "liveData": true
                    }
                },
                { 
                  "type": "log",
                  "x": 0,
                  "y": 66,
                  "width": 9,
                  "height": 3,
                  "properties": {
                    "query": "SOURCE '/aws/lambda/${self:custom.funktor.IncomingJobHandlerName}' | fields @initDuration\n| filter ispresent(@initDuration)\n| stats pct(@initDuration, 5) as p5,\n\n\n\n        pct(@initDuration, 50) as p50,\n\n\n\n        pct(@initDuration, 95) as p95,\n\n\n\n        pct(@initDuration, 99) as p99\n\n\n\n  by bin(1h)\n",
                    "region": "us-east-1",
                    "stacked": false,
                    "view": "timeSeries",
                    "title": "Incoming Job Handler Init Duration"
                  }
                },
                { 
                    "height": 6,
                    "width": 9,
                    "y": 63,
                    "x": 9,
                    "type": "metric",
                    "properties": {
                        "period": 60,
                        "metrics": [
                            [ "AWS/Lambda", "Duration", "FunctionName", "${self:custom.funktor.IncomingJobHandlerName}", { "stat": "p20" } ],
                            [ "...", { "stat": "p50" } ],
                            [ "...", { "stat": "p80" } ],
                            [ "...", { "stat": "p90" } ]
                        ],
                        "region": "us-east-1",
                        "title": "Incoming Job Handler Duration in Milliseconds",
                        "view": "timeSeries",
                        "stacked": false,
                        "liveData": true
                    }
                },
                { 
                    "height": 3,
                    "width": 6,
                    "y": 63,
                    "x": 18,
                    "type": "metric",
                    "properties": {
                        "period": 60,
                        "metrics": [
                            [ "AWS/Lambda", "Errors", "FunctionName", "${self:custom.funktor.IncomingJobHandlerName}", { "id": "errors", "stat": "Sum", "color": "#d13212" } ],
                            [ ".", "Invocations", ".", ".", { "id": "invocations", "stat": "Sum", "visible": false } ],
                            [ { "expression": "100 - 100 * errors / MAX([errors, invocations])", "label": "Success rate (%)", "id": "availability", "yAxis": "right", "region": "us-east-1" } ]
                        ],
                        "region": "us-east-1",
                        "title": "Incoming Job Handler Error count and success rate (%)",
                        "yAxis": {
                            "right": {
                                "max": 100
                            }
                        },
                        "view": "timeSeries",
                        "stacked": false,
                        "liveData": true
                    }
                },


                { 
                    "height": 3,
                    "width": 6,
                    "y": 66,
                    "x": 18,
                    "type": "metric",
                    "properties": {
                        "period": 60,
                        "metrics": [
                            [ "AWS/Lambda", "ConcurrentExecutions", "FunctionName", "${self:custom.funktor.IncomingJobHandlerName}", { "stat": "Maximum" } ]
                        ],
                        "region": "us-east-1",
                        "title": "Incoming Job Handler Concurrent Executions",
                        "view": "timeSeries",
                        "stacked": false,
                        "liveData": true
                    }
                },
                

                


                { 
                    "height": 3,
                    "width": 6,
                    "y": 69,
                    "x": 0,
                    "type": "text",
                    "properties": {
                        "markdown": "\n# Default Queue\n"
                    }
                },
                { 
                    "height": 3,
                    "width": 3,
                    "y": 69,
                    "x": 6,
                    "type": "metric",
                    "properties": {
                        "metrics": [
                            [ "AWS/SQS", "NumberOfMessagesReceived", "QueueName",
                              "${self:custom.funktor.DefaultQueueName}", { "label": "Messages Per Minute" } ]
                        ],
                        "view": "singleValue",
                        "region": "us-east-1",
                        "stat": "Sum",
                        "period": 60,
                        "sparkline": true,
                        "title": "Messages Per Minute"
                    }
                },
                { 
                    "height": 3,
                    "width": 15,
                    "y": 69,
                    "x": 9,
                    "type": "metric",
                    "properties": {
                        "metrics": [
                            [ "AWS/Lambda", "Duration", "FunctionName",
                              "${self:custom.funktor.DefaultQueueHandlerName}", "Resource",
                              "${self:custom.funktor.DefaultQueueHandlerName}", { "label": "p20" } ],
                            [ "...", { "label": "p50", "stat": "p50" } ],
                            [ "...", { "label": "p80", "stat": "p80" } ],
                            [ "...", { "label": "p90", "stat": "p90" } ]
                        ],
                        "view": "singleValue",
                        "region": "us-east-1",
                        "stat": "p20",
                        "period": 60,
                        "sparkline": true,
                        "title": "Handler Duration"
                    }
                },
                { 
                    "height": 3,
                    "width": 9,
                    "y": 72,
                    "x": 0,
                    "type": "metric",
                    "properties": {
                        "metrics": [
                            [ "AWS/SQS", "NumberOfMessagesReceived", "QueueName",
                              "${self:custom.funktor.DefaultQueueName}",
                              { "label": "Received" } ],
                            [ ".", "NumberOfMessagesDeleted", ".", ".", { "label": "Handled" } ],
                            [ "AWS/Lambda", "Invocations", "FunctionName",
                              "${self:custom.funktor.DefaultQueueHandlerName}", "Resource",
                              "${self:custom.funktor.DefaultQueueHandlerName}", { "label": "Handler Invocations" } ],
                            [ "AWS/SQS", "ApproximateNumberOfMessagesVisible", "QueueName",
                              "${self:custom.funktor.DefaultQueueName}", { "label": "Pending?" } ],
                            [ ".", "ApproximateNumberOfMessagesNotVisible", ".", ".", { "label": "Backlog?" } ],
                            [ ".", "NumberOfMessagesSent", ".", ".", { "label": "Sent" } ],
                            [ ".", "ApproximateNumberOfMessagesDelayed", ".", ".", { "label": "Delayed" } ]
                        ],
                        "view": "timeSeries",
                        "stacked": false,
                        "region": "us-east-1",
                        "title": "Default Queue (Async jobs go here immediately, scheduled jobs land here in the minute before they're scheduled)",
                        "period": 60,
                        "stat": "Sum",
                        "liveData": true
                    }
                },
                { 
                  "type": "log",
                  "x": 0,
                  "y": 72,
                  "width": 9,
                  "height": 3,
                  "properties": {
                    "query": "SOURCE '/aws/lambda/${self:custom.funktor.DefaultQueueHandlerName}' | fields @initDuration\n| filter ispresent(@initDuration)\n| stats pct(@initDuration, 5) as p5,\n\n\n\n        pct(@initDuration, 50) as p50,\n\n\n\n        pct(@initDuration, 95) as p95,\n\n\n\n        pct(@initDuration, 99) as p99\n\n\n\n  by bin(1h)\n",
                    "region": "us-east-1",
                    "stacked": false,
                    "view": "timeSeries",
                    "title": "Handler Init Duration"
                  }
                },
                { 
                    "height": 6,
                    "width": 9,
                    "y": 72,
                    "x": 9,
                    "type": "metric",
                    "properties": {
                        "period": 60,
                        "metrics": [
                            [ "AWS/Lambda", "Duration", "FunctionName", "${self:custom.funktor.DefaultQueueHandlerName}", { "stat": "p20" } ],
                            [ "...", { "stat": "p50" } ],
                            [ "...", { "stat": "p80" } ],
                            [ "...", { "stat": "p90" } ]
                        ],
                        "region": "us-east-1",
                        "title": "Default Queue Handler Duration in Milliseconds",
                        "view": "timeSeries",
                        "stacked": false,
                        "liveData": true
                    }
                },
                { 
                    "height": 3,
                    "width": 6,
                    "y": 72,
                    "x": 18,
                    "type": "metric",
                    "properties": {
                        "period": 60,
                        "metrics": [
                            [ "AWS/Lambda", "Errors", "FunctionName",
                              "${self:custom.funktor.DefaultQueueHandlerName}", { "id": "errors", "stat": "Sum", "color": "#d13212" } ],
                            [ ".", "Invocations", ".", ".", { "id": "invocations", "stat": "Sum", "visible": false } ],
                            [ { "expression": "100 - 100 * errors / MAX([errors, invocations])", "label": "Success rate (%)", "id": "availability", "yAxis": "right", "region": "us-east-1" } ]
                        ],
                        "region": "us-east-1",
                        "title": "Default Queue Handler Error count and success rate (%)",
                        "yAxis": {
                            "right": {
                                "max": 100
                            }
                        },
                        "view": "timeSeries",
                        "stacked": false,
                        "liveData": true
                    }
                },
                { 
                    "height": 3,
                    "width": 6,
                    "y": 75,
                    "x": 18,
                    "type": "metric",
                    "properties": {
                        "period": 60,
                        "metrics": [
                            [ "AWS/Lambda", "ConcurrentExecutions", "FunctionName",
                              "${self:custom.funktor.DefaultQueueHandlerName}", { "stat": "Maximum" } ]
                        ],
                        "region": "us-east-1",
                        "title": "Default Queue Handler Concurrent executions",
                        "view": "timeSeries",
                        "stacked": false,
                        "liveData": true
                    }
                },

                
                { 
                    "height": 3,
                    "width": 6,
                    "y": 78,
                    "x": 0,
                    "type": "text",
                    "properties": {
                        "markdown": "\n# LowConcurrency Queue\n"
                    }
                },
                { 
                    "height": 3,
                    "width": 3,
                    "y": 78,
                    "x": 6,
                    "type": "metric",
                    "properties": {
                        "metrics": [
                            [ "AWS/SQS", "NumberOfMessagesReceived", "QueueName",
                              "${self:custom.funktor.LowConcurrencyQueueName}", { "label": "Messages Per Minute" } ]
                        ],
                        "view": "singleValue",
                        "region": "us-east-1",
                        "stat": "Sum",
                        "period": 60,
                        "sparkline": true,
                        "title": "Messages Per Minute"
                    }
                },
                { 
                    "height": 3,
                    "width": 15,
                    "y": 78,
                    "x": 9,
                    "type": "metric",
                    "properties": {
                        "metrics": [
                            [ "AWS/Lambda", "Duration", "FunctionName",
                              "${self:custom.funktor.LowConcurrencyQueueHandlerName}", "Resource",
                              "${self:custom.funktor.LowConcurrencyQueueHandlerName}", { "label": "p20" } ],
                            [ "...", { "label": "p50", "stat": "p50" } ],
                            [ "...", { "label": "p80", "stat": "p80" } ],
                            [ "...", { "label": "p90", "stat": "p90" } ]
                        ],
                        "view": "singleValue",
                        "region": "us-east-1",
                        "stat": "p20",
                        "period": 60,
                        "sparkline": true,
                        "title": "Handler Duration"
                    }
                },
                { 
                    "height": 3,
                    "width": 9,
                    "y": 81,
                    "x": 0,
                    "type": "metric",
                    "properties": {
                        "metrics": [
                            [ "AWS/SQS", "NumberOfMessagesReceived", "QueueName",
                              "${self:custom.funktor.LowConcurrencyQueueName}",
                              { "label": "Received" } ],
                            [ ".", "NumberOfMessagesDeleted", ".", ".", { "label": "Handled" } ],
                            [ "AWS/Lambda", "Invocations", "FunctionName",
                              "${self:custom.funktor.LowConcurrencyQueueHandlerName}", "Resource",
                              "${self:custom.funktor.LowConcurrencyQueueHandlerName}", { "label": "Handler Invocations" } ],
                            [ "AWS/SQS", "ApproximateNumberOfMessagesVisible", "QueueName",
                              "${self:custom.funktor.LowConcurrencyQueueName}", { "label": "Pending?" } ],
                            [ ".", "ApproximateNumberOfMessagesNotVisible", ".", ".", { "label": "Backlog?" } ],
                            [ ".", "NumberOfMessagesSent", ".", ".", { "label": "Sent" } ],
                            [ ".", "ApproximateNumberOfMessagesDelayed", ".", ".", { "label": "Delayed" } ]
                        ],
                        "view": "timeSeries",
                        "stacked": false,
                        "region": "us-east-1",
                        "title": "LowConcurrency Queue (Async jobs go here immediately, scheduled jobs land here in the minute before they're scheduled)",
                        "period": 60,
                        "stat": "Sum",
                        "liveData": true
                    }
                },
                { 
                  "type": "log",
                  "x": 0,
                  "y": 81,
                  "width": 9,
                  "height": 3,
                  "properties": {
                    "query": "SOURCE '/aws/lambda/${self:custom.funktor.LowConcurrencyQueueHandlerName}' | fields @initDuration\n| filter ispresent(@initDuration)\n| stats pct(@initDuration, 5) as p5,\n\n\n\n        pct(@initDuration, 50) as p50,\n\n\n\n        pct(@initDuration, 95) as p95,\n\n\n\n        pct(@initDuration, 99) as p99\n\n\n\n  by bin(1h)\n",
                    "region": "us-east-1",
                    "stacked": false,
                    "view": "timeSeries",
                    "title": "Handler Init Duration"
                  }
                },
                { 
                    "height": 6,
                    "width": 9,
                    "y": 81,
                    "x": 9,
                    "type": "metric",
                    "properties": {
                        "period": 60,
                        "metrics": [
                            [ "AWS/Lambda", "Duration", "FunctionName", "${self:custom.funktor.LowConcurrencyQueueHandlerName}", { "stat": "p20" } ],
                            [ "...", { "stat": "p50" } ],
                            [ "...", { "stat": "p80" } ],
                            [ "...", { "stat": "p90" } ]
                        ],
                        "region": "us-east-1",
                        "title": "LowConcurrency Queue Handler Duration in Milliseconds",
                        "view": "timeSeries",
                        "stacked": false,
                        "liveData": true
                    }
                },
                { 
                    "height": 3,
                    "width": 6,
                    "y": 81,
                    "x": 18,
                    "type": "metric",
                    "properties": {
                        "period": 60,
                        "metrics": [
                            [ "AWS/Lambda", "Errors", "FunctionName",
                              "${self:custom.funktor.LowConcurrencyQueueHandlerName}", { "id": "errors", "stat": "Sum", "color": "#d13212" } ],
                            [ ".", "Invocations", ".", ".", { "id": "invocations", "stat": "Sum", "visible": false } ],
                            [ { "expression": "100 - 100 * errors / MAX([errors, invocations])", "label": "Success rate (%)", "id": "availability", "yAxis": "right", "region": "us-east-1" } ]
                        ],
                        "region": "us-east-1",
                        "title": "LowConcurrency Queue Handler Error count and success rate (%)",
                        "yAxis": {
                            "right": {
                                "max": 100
                            }
                        },
                        "view": "timeSeries",
                        "stacked": false,
                        "liveData": true
                    }
                },
                { 
                    "height": 3,
                    "width": 6,
                    "y": 84,
                    "x": 18,
                    "type": "metric",
                    "properties": {
                        "period": 60,
                        "metrics": [
                            [ "AWS/Lambda", "ConcurrentExecutions", "FunctionName",
                              "${self:custom.funktor.LowConcurrencyQueueHandlerName}", { "stat": "Maximum" } ]
                        ],
                        "region": "us-east-1",
                        "title": "LowConcurrency Queue Handler Concurrent executions",
                        "view": "timeSeries",
                        "stacked": false,
                        "liveData": true
                    }
                },

                

                

                { 
                    "height": 3,
                    "width": 6,
                    "y": 87,
                    "x": 0,
                    "type": "text",
                    "properties": {
                        "markdown": "\n# Delayed Jobs\n"
                    }
                },
                { 
                    "height": 3,
                    "width": 3,
                    "y": 87,
                    "x": 6,
                    "type": "metric",
                    "properties": {
                        "metrics": [
                            [ "AWS/DynamoDB", "ReturnedItemCount", "TableName", "${self:custom.funktor.JobsTableName}", "Operation", "Query" ]
                        ],
                        "view": "singleValue",
                        "region": "us-east-1",
                        "stat": "Average",
                        "period": 60,
                        "sparkline": true,
                        "title": "Messages To Be Scheduled"
                    }
                },
                { 
                    "height": 3,
                    "width": 15,
                    "y": 87,
                    "x": 9,
                    "type": "metric",
                    "properties": {
                        "metrics": [
                            [ "AWS/Lambda", "Duration", "FunctionName", "${self:custom.funktor.JobActivatorName}", "Resource", "${self:custom.funktor.JobActivatorName}", { "label": "p20" } ],
                            [ "...", { "label": "p50", "stat": "p50" } ],
                            [ "...", { "label": "p80", "stat": "p80" } ],
                            [ "...", { "label": "p90", "stat": "p90" } ]
                        ],
                        "view": "singleValue",
                        "region": "us-east-1",
                        "stat": "p20",
                        "period": 60,
                        "sparkline": true,
                        "title": "Handler Duration"
                    }
                },



                
                { 
                    "height": 3,
                    "width": 6,
                    "y": 90,
                    "x": 18,
                    "type": "metric",
                    "properties": {
                        "period": 60,
                        "metrics": [
                            [ "AWS/Lambda", "Errors", "FunctionName", "${self:custom.funktor.JobActivatorName}", { "id": "errors", "stat": "Sum", "color": "#d13212" } ],
                            [ ".", "Invocations", ".", ".", { "id": "invocations", "stat": "Sum", "visible": false } ],
                            [ { "expression": "100 - 100 * errors / MAX([errors, invocations])", "label": "Success rate (%)", "id": "availability", "yAxis": "right", "region": "us-east-1" } ]
                        ],
                        "region": "us-east-1",
                        "title": "Delayed Job SchedulerError count and success rate (%)",
                        "yAxis": {
                            "right": {
                                "max": 100
                            }
                        },
                        "view": "timeSeries",
                        "stacked": false,
                        "liveData": true
                    }
                },
                { 
                    "height": 3,
                    "width": 9,
                    "y": 90,
                    "x": 9,
                    "type": "metric",
                    "properties": {
                        "period": 60,
                        "metrics": [
                            [ "AWS/Lambda", "Duration", "FunctionName", "${self:custom.funktor.JobActivatorName}", { "stat": "p20" } ],
                            [ "...", { "stat": "p50" } ],
                            [ "...", { "stat": "p80" } ],
                            [ "...", { "stat": "p90" } ]
                        ],
                        "region": "us-east-1",
                        "title": "Delayed Job Scheduler Duration",
                        "view": "timeSeries",
                        "stacked": false,
                        "liveData": true
                    }
                },
                { 
                    "height": 3,
                    "width": 9,
                    "y": 90,
                    "x": 0,
                    "type": "metric",
                    "properties": {
                        "metrics": [
                            [ "AWS/DynamoDB", "ReturnedItemCount", "TableName", "${self:custom.funktor.JobsTableName}", "Operation", "Query" ]
                        ],
                        "view": "timeSeries",
                        "stacked": false,
                        "region": "us-east-1",
                        "title": "Delayed Jobs To Be Executed In The Next 90 Seconds",
                        "period": 60,
                        "stat": "Average",
                        "liveData": true
                    }
                },


                
                { 
                    "height": 3,
                    "width": 9,
                    "y": 93,
                    "x": 0,
                    "type": "metric",
                    "properties": {
                        "metrics": [
                            [ { "expression": "m2/PERIOD(m2)", "label": "Consumed Read Capacity Units", "id": "e1", "stat": "Sum", "region": "us-east-1" } ],
                            [ "AWS/DynamoDB", "ConsumedReadCapacityUnits", "TableName", "${self:custom.funktor.JobsTableName}", { "id": "m2", "visible": false } ],
                            [ ".", "ConsumedWriteCapacityUnits", ".", ".", { "yAxis": "left", "id": "m4", "visible": false } ],
                            [ ".", "WriteThrottleEvents", ".", ".", { "yAxis": "right", "id": "m5", "visible": false } ]
                        ],
                        "view": "timeSeries",
                        "stacked": false,
                        "region": "us-east-1",
                        "title": "Scheduled Job Table Read Capacity Units",
                        "period": 60,
                        "stat": "Sum",
                        "liveData": true
                    }
                },
                { 
                    "height": 3,
                    "width": 6,
                    "y": 93,
                    "x": 18,
                    "type": "metric",
                    "properties": {
                        "period": 60,
                        "metrics": [
                            [ "AWS/Lambda", "ConcurrentExecutions", "FunctionName", "${self:custom.funktor.JobActivatorName}", { "stat": "Maximum" } ]
                        ],
                        "region": "us-east-1",
                        "title": "Delayd Job Schedule Concurrent executions",
                        "view": "timeSeries",
                        "stacked": false,
                        "liveData": true
                    }
                },
                { 
                    "height": 3,
                    "width": 9,
                    "y": 93,
                    "x": 9,
                    "type": "metric",
                    "properties": {
                        "metrics": [
                            [ { "expression": "m4/PERIOD(m4)", "label": "Consumed Read Capacity Units", "id": "e1", "stat": "Sum", "region": "us-east-1" } ],
                            [ "AWS/DynamoDB", "ConsumedReadCapacityUnits", "TableName", "${self:custom.funktor.JobsTableName}", { "id": "m2", "visible": false } ],
                            [ ".", "ConsumedWriteCapacityUnits", ".", ".", { "yAxis": "left", "id": "m4", "visible": false } ],
                            [ ".", "WriteThrottleEvents", ".", ".", { "yAxis": "right", "id": "m5", "visible": false } ]
                        ],
                        "view": "timeSeries",
                        "stacked": false,
                        "region": "us-east-1",
                        "title": "Scheduled Job Table Write Capacity Units",
                        "period": 60,
                        "stat": "Sum",
                        "liveData": true
                    }
                },



                
                { 
                  "type": "log",
                  "x": 0,
                  "y": 96,
                  "width": 9,
                  "height": 3,
                  "properties": {
                    "query": "SOURCE '/aws/lambda/${self:custom.funktor.JobActivatorName}' | fields @initDuration\n| filter ispresent(@initDuration)\n| stats pct(@initDuration, 5) as p5,\n\n\n\n        pct(@initDuration, 50) as p50,\n\n\n\n        pct(@initDuration, 95) as p95,\n\n\n\n        pct(@initDuration, 99) as p99\n\n\n\n  by bin(1h)\n",
                    "region": "us-east-1",
                    "stacked": false,
                    "view": "timeSeries",
                    "title": "Handler Init Duration"
                  }
                },
                { 
                    "height": 3,
                    "width": 9,
                    "y": 96,
                    "x": 9,
                    "type": "metric",
                    "properties": {
                        "metrics": [
                            [ "AWS/DynamoDB", "SuccessfulRequestLatency", "TableName", "${self:custom.funktor.JobsTableName}", "Operation", "PutItem", { "yAxis": "left" } ],
                            [ "...", "Query" ],
                            [ ".", "ThrottledRequests", ".", ".", ".", "PutItem", { "yAxis": "right", "visible": false } ],
                            [ ".", "SuccessfulRequestLatency", ".", ".", ".", "DeleteItem" ],
                            [ ".", "SuccessfulRequestLatency", ".", ".", ".", "UpdateItem" ],
                            [ ".", "ThrottledRequests", ".", ".", ".", ".", { "yAxis": "right", "visible": false } ]
                        ],
                        "view": "timeSeries",
                        "stacked": false,
                        "region": "us-east-1",
                        "stat": "Average",
                        "period": 60,
                        "title": "Scheduled Job Table Latency",
                        "liveData": true
                    }
                },
                { 
                    "height": 3,
                    "width": 6,
                    "y": 96,
                    "x": 18,
                    "type": "metric",
                    "properties": {
                        "metrics": [
                            [ "AWS/DynamoDB", "ThrottledRequests", "TableName", "${self:custom.funktor.JobsTableName}", "Operation", "DeleteItem" ],
                            [ "...", "PutItem" ]
                        ],
                        "view": "timeSeries",
                        "stacked": false,
                        "region": "us-east-1",
                        "stat": "Sum",
                        "period": 60,
                        "title": "Scheduled Job Table Throttled Operations",
                        "liveData": true
                    }
                }


                

            ]
        }
